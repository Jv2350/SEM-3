<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binary Search Algorithm</title>
<style>
    body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
    }
    
    .container {
        margin: 20px;
        padding: 20px;
        border: 1px solid #ccc;
        text-align: center;
    }
    
    .sorted-number-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 5px;
        display: inline-block;
    }
    
    .search-step-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 10px 0;
    }
</style>
<script>
function binarySearch(arr, target) {
    let left = 0;
    let right = arr.length - 1;
    const steps = [];

    while (left <= right) {
        const mid = Math.floor((left + right) / 2);
        steps.push({ left, right, mid, value: arr[mid] });
        
        if (arr[mid] === target) {
            return { resultIndex: mid, steps };
        } else if (arr[mid] < target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return { resultIndex: -1, steps }; // Target not found
}

function performBinarySearch() {
    const targetValue = parseInt(document.getElementById("targetValue").value);
    const userInput = document.getElementById("userInput").value;
    
    // Extract the current user inputs from local storage (if any)
    let userInputs = JSON.parse(localStorage.getItem('userInputs')) || [];
    
    if (!isNaN(userInput) && userInput.trim() !== '') {
        userInputs.push(parseInt(userInput));
    }
    
    // Save the updated user inputs to local storage
    localStorage.setItem('userInputs', JSON.stringify(userInputs));
    
    const sortedArray = userInputs.slice().sort((a, b) => a - b);
    
    const sortedListBox = document.getElementById("sortedListBox");
    sortedListBox.innerHTML = `
        <div class="container">
            <p>Sorted List:</p>
            <div>
                ${sortedArray.map(number => `
                    <div class="sorted-number-box">${number}</div>
                `).join("")}
            </div>
        </div>
    `;
    
    const { resultIndex, steps } = binarySearch(sortedArray, targetValue);
    const resultElement = document.getElementById("result");
    const stepsElement = document.getElementById("steps");

    if (resultIndex !== -1) {
        resultElement.textContent = `Target value ${targetValue} found at index ${resultIndex}`;
    } else {
        resultElement.textContent = `Target value ${targetValue} not found in the array`;
    }
    
    stepsElement.innerHTML = `
        <div class="container">
            <p>Binary Search Steps:</p>
            <div>
                ${steps.map((step, index) => `
                    <div class="search-step-box">
                        Step ${index + 1}:
                        Left: ${step.left}, Right: ${step.right}, Mid: ${step.mid}, Value: ${step.value}
                    </div>
                `).join("")}
            </div>
        </div>
    `;
    
    document.getElementById("userInput").value = ''; // Clear the input field
}
</script>
</head>
<body>
<h1>Binary Search Algorithm</h1>
<p>Enter a number and press Enter to add to the list:</p>
<input type="number" id="userInput" onkeydown="if(event.keyCode===13) addUserInput()">
<button onclick="performBinarySearch()">Sort</button>
<p>Enter the target value to search:</p>
<input type="number" id="targetValue" min="0" onkeydown="if(event.keyCode===13) performBinarySearch()">
<button onclick="performBinarySearch()">Search</button>
<div id="sortedListBox"></div>
<div id="result"></div>
<div id="steps"></div>
<script>
    function addUserInput() {
        const userInput = document.getElementById("userInput").value;
        
        if (!isNaN(userInput) && userInput.trim() !== '') {
            const sortedListBox = document.getElementById("sortedListBox");
            sortedListBox.innerHTML += `
                <div class="sorted-number-box">${userInput}</div>
            `;
            document.getElementById("userInput").value = ''; // Clear the input field
        }
    }
</script>
</body>
</html>
